<?php//// Менеджер статей//class M_Articles{	private static $instance; // ссылка на экземпляр класса	//	// Получение единственного экземпляра (одиночка).	//	public static function Instance()	{		if (self::$instance == null)			self::$instance = new M_Articles();				return self::$instance;	}	//	// Список всех статей	//	public function All()	{		// Запрос.		$query = "SELECT * 				  FROM articles 				  ORDER BY id_article DESC";				  		$result = mysql_query($query);										if (!$result)			die(mysql_error());				// Извлечение из БД.		$n = mysql_num_rows($result);		$articles = array();		for ($i = 0; $i < $n; $i++)		{			$row = mysql_fetch_assoc($result);					$articles[] = $row;		}				return $articles;	}	//	// Конкретная статья	//	public function Get($id_article)	{		// Запрос.		$t = "SELECT * 			  FROM articles 			  WHERE id_article = '%d'";			  		$query = sprintf($t, $id_article);				$result = mysql_query($query);											if (!$result)			die(mysql_error());				// Извлечение из БД.		$article = mysql_fetch_assoc($result);							return $article;	}	//	// Добавить статью	//	public function Add($title, $content)	{		// Подготовка.		$title = trim($title);		$content = trim($content);		// Проверка.		if ($title == '')			return false;				// Запрос.		$t = "INSERT INTO articles (title, content) 			  VALUES ('%s', '%s')";				$query = sprintf($t, 						 mysql_real_escape_string($title),						 mysql_real_escape_string($content));				$result = mysql_query($query);										if (!$result)			die(mysql_error());					return true;	}	//	// Изменить статью	//	public function Edit($id_article, $title, $content)	{		// Подготовка.		$title = trim($title);		$content = trim($content);		// Проверка.		if ($title == '')			return false;				// Запрос.		$t = "UPDATE articles			  SET title = '%s', content = '%s'			  WHERE id_article = '%d'";				$query = sprintf($t,					 						 mysql_real_escape_string($title),						 mysql_real_escape_string($content),						 $id_article);				$result = mysql_query($query);				if (!$result)			die(mysql_error());				return true;	}	//	// Удалить статью	//	public function Delete($id_article)	{		$t = "DELETE FROM articles 				  WHERE id_article = '%d'";		$query = sprintf($t, $id_article);				$result = mysql_query($query);				if (!$result)			die(mysql_error());				return true;	}}